<!DOCTYPE html>
<html>
{% include "head.html" %}
<body>

{% include "topbar.html" %}
{% set image = dbimage.get_image() %}

<section class="breadcrumbs">
    {% if not settings.collection %}
    <a href="{{ url_for('index') }}">Index</a>
    <span class="separator"> &gt; </span>
    {% endif %}
    <a href="{{ url_for('collection', collection_name=dbimage.collection.name) }}">{{ collection_settings.label }}</a>
    <span class="separator"> &gt; </span>
    <span class="current">{{ get_title(dbimage) | safe }}</span>
</section>

<section style="display: flex; align-items: center; gap: 10px;">
Copy data link:
<a href="#" onclick="copyTextToClipboard(this, '{{ get_data_url(dbimage) }}')" class="icon">
    <div class="tooltip">
        <img src="{{ url_for('static', path='copy-link-64.png') }}" alt="Copy link icon">
        <span class="tooltiptext">Copy image data URL</span>
    </div>
</a>
</section>

<section style="display: flex; align-items: center; gap: 10px;">
Open with: 
{% for viewer in get_viewers(dbimage) %}
    <a href="{{ get_viewer_url(dbimage, viewer) }}" class="icon" target="_blank" rel="noopener noreferrer">
        <div class="tooltip">
            <img src="{{ url_for('static', path=viewer.icon) }}" alt="{{ viewer.name }} icon">
            <span class="tooltiptext">View in {{ viewer.name }}</span>
        </div>
    </a>
{% endfor %}
</section>

<section>

<div class="content">
    {% if dbimage.image_metadata and dbimage.image_metadata.aux_image_path %}
    <img src="{{ get_aux_path_url(dbimage, dbimage.image_metadata.aux_image_path, request) }}" alt="Image thumbnail" class="image" />
    {% else %}
    <img src="{{  url_for('static', path='zarr.jpg') }}" alt="Default thumbnail" class="image" />
    {% endif %}

    <table class="attrs">
        <colgroup>
            <col style="width: 12em;">
            <col style="width: auto;">
        </colgroup>
        {% if dbimage.image_metadata %}
            {% for attr in column_map.keys() %}
                {% if column_map[attr] not in collection_settings.hide_columns %}
                <tr><td>{{ column_map[attr] }}</td><td><span class="data">{{ getattr(dbimage.image_metadata, attr) | safe }}</span></td></tr>
                {% endif %}
            {% endfor %}
        {% endif %}
        <tr><td>Path</td><td><span class="data">{{ dbimage.path }}</span></td></tr>
        <tr><td>Axes</td><td><span class="data">{{ image.axes_order.upper() }}</span></td></tr>
        <tr><td>Chunk size</td><td><span class="data">{{ image.chunk_size }}</span></td></tr>
        <tr><td>Voxel dimensions</td><td><span class="data">{{ image.dimensions_voxels }}</span></td></tr>
        <tr><td>Physical dimensions</td><td><span class="data">{{ image.dimensions }}</span></td></tr>
        <tr><td>Voxel sizes</td><td><span class="data">{{ image.voxel_sizes }}</span></td></tr>
        <tr><td>Compression</td><td><span class="data">{{ image.compression }}</span></td></tr>
    </table>
</div>

</section>

</body>
</html>